\makeatletter
\patchcmd{\@verbatim}
  {\verbatim@font}
  {\verbatim@font\scriptsize}
  {}{}
\makeatother

\newunicodechar{ }{~}
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{remark}{Remark}
\newtheorem{corollary}{Corollary}
\newtheorem{proposition}{Proposition}

\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\GH}{GH}
\renewcommand{\vec}[1]{\ensuremath{\mathbf{#1}}\xspace}
\renewcommand{\norm}[1]{\left\lVert#1\right\rVert}
\providecommand{\mat}[1]{\ensuremath{\vec{#1}}\xspace}
\providecommand{\ring}[0]{\ensuremath{\mathcal{R}}\xspace}


\newcommand{\malb}[2][inline]{\todo[#1]{\textbf{malb:} #2}\xspace}

\lstdefinelanguage{Sage}[]{Python}{
   morekeywords={True,False,sage,cdef,cpdef,ctypedef,self},
   sensitive=true
}

\lstdefinelanguage{diff}{
  morecomment=[f][\color{black}\textbf]{+\ },
  morecomment=[f][\color{darkgray}]{-\ },
}

\lstset{showtabs=False,
        showspaces=False,
        showstringspaces=False,
        commentstyle={\color{gray}},
        keywordstyle={\color{black}\textbf},
        stringstyle={\color{darkgray}},
        frame=single,
        basicstyle=\tt\scriptsize\relax,
        inputencoding=utf8,
        literate={…}{{\ldots}}1,
        belowskip=0.0em,}


\IfFontExistsTF{Cousine}{
\setmonofont[BoldFont={Cousine Bold},
             ItalicFont={Cousine Italic},
             BoldItalicFont={Cousine Bold Italic},
             Scale=0.90]{Cousine}
}{}

\IfFontExistsTF{TeX Gyre Pagella}{
\setmainfont{TeX Gyre Pagella}
}{}

\linespread{1.04}

\IfFileExists{unicodesymbols.sty}{
\RequirePackage{unicodesymbols} % after metropolis which loads fontspec
}{}
